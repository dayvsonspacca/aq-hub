name: Run Tests, Format, and Generate API Docs (Modular)

on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - main

jobs:
  call-tests:
    name: Run Tests
    uses: ./.github/workflows/run-tests.yaml 

  call-generate-docs:
    name: Generate API Documentation
    needs: call-tests
    permissions:
      contents: write
    uses: ./.github/workflows/generate-docs.yaml

  call-format:
    name: Format Code
    needs: call-generate-docs
    permissions:
      contents: write
    uses: ./.github/workflows/format-code.yaml